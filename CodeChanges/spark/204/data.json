{
  "url": "https://api.github.com/repos/apache/spark/pulls/204",
  "id": 13865622,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MTM4NjU2MjI=",
  "html_url": "https://github.com/apache/spark/pull/204",
  "diff_url": "https://github.com/apache/spark/pull/204.diff",
  "patch_url": "https://github.com/apache/spark/pull/204.patch",
  "issue_url": "https://api.github.com/repos/apache/spark/issues/204",
  "number": 204,
  "state": "closed",
  "locked": false,
  "title": "[SPARK-1276] Add a HistoryServer to render persisted UI",
  "user": {
    "login": "andrewor14",
    "id": 2133137,
    "node_id": "MDQ6VXNlcjIxMzMxMzc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2133137?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/andrewor14",
    "html_url": "https://github.com/andrewor14",
    "followers_url": "https://api.github.com/users/andrewor14/followers",
    "following_url": "https://api.github.com/users/andrewor14/following{/other_user}",
    "gists_url": "https://api.github.com/users/andrewor14/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/andrewor14/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/andrewor14/subscriptions",
    "organizations_url": "https://api.github.com/users/andrewor14/orgs",
    "repos_url": "https://api.github.com/users/andrewor14/repos",
    "events_url": "https://api.github.com/users/andrewor14/events{/privacy}",
    "received_events_url": "https://api.github.com/users/andrewor14/received_events",
    "type": "User",
    "site_admin": false
  },
  "body": "The new feature of event logging, introduced in #42, allows the user to persist the details of his/her Spark application to storage, and later replay these events to reconstruct an after-the-fact SparkUI.\nCurrently, however, a persisted UI can only be rendered through the standalone Master. This greatly limits the use case of this new feature as many people also run Spark on Yarn / Mesos.\n\nThis PR introduces a new entity called the HistoryServer, which, given a log directory, keeps track of all completed applications independently of a Spark Master. Unlike Master, the HistoryServer needs not be running while the application is still running. It is relatively light-weight in that it only maintains static information of applications and performs no scheduling.\n\nTo quickly test it out, generate event logs with `spark.eventLog.enabled=true` and run `sbin/start-history-server.sh <log-dir-path>`. Your HistoryServer awaits on port 18080.\n\nComments and feedback are most welcome.\n\n---\n\nA few other changes introduced in this PR include refactoring the WebUI interface, which is beginning to have a lot of duplicate code now that we have added more functionality to it. Two new SparkListenerEvents have been introduced (SparkListenerApplicationStart/End) to keep track of application name and start/finish times. This PR also clarifies the semantics of the ReplayListenerBus introduced in #42.\n\nA potential TODO in the future (not part of this PR) is to render live applications in addition to just completed applications. This is useful when applications fail, a condition that our current HistoryServer does not handle unless the user manually signals application completion (by creating the APPLICATION_COMPLETION file). Handling live applications becomes significantly more challenging, however, because it is now necessary to render the same SparkUI multiple times. To avoid reading the entire log every time, which is inefficient, we must handle reading the log from where we previously left off, but this becomes fairly complicated because we must deal with the arbitrary behavior of each input stream.\n",
  "created_at": "2014-03-22T05:36:41Z",
  "updated_at": "2014-06-25T08:12:53Z",
  "closed_at": "2014-04-10T17:45:47Z",
  "merged_at": null,
  "merge_commit_sha": "8a471cf21d4402e1fe4b0c2a2d9bb6cad594dbae",
  "assignee": null,
  "assignees": [],
  "requested_reviewers": [],
  "requested_teams": [],
  "labels": [],
  "milestone": null,
  "draft": false,
  "commits_url": "https://api.github.com/repos/apache/spark/pulls/204/commits",
  "review_comments_url": "https://api.github.com/repos/apache/spark/pulls/204/comments",
  "review_comment_url": "https://api.github.com/repos/apache/spark/pulls/comments{/number}",
  "comments_url": "https://api.github.com/repos/apache/spark/issues/204/comments",
  "statuses_url": "https://api.github.com/repos/apache/spark/statuses/7b7234cd275628a4fa1ce8e2b06392f546964339",
  "head": {
    "label": "andrewor14:master",
    "ref": "master",
    "sha": "7b7234cd275628a4fa1ce8e2b06392f546964339",
    "user": {
      "login": "andrewor14",
      "id": 2133137,
      "node_id": "MDQ6VXNlcjIxMzMxMzc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2133137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/andrewor14",
      "html_url": "https://github.com/andrewor14",
      "followers_url": "https://api.github.com/users/andrewor14/followers",
      "following_url": "https://api.github.com/users/andrewor14/following{/other_user}",
      "gists_url": "https://api.github.com/users/andrewor14/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/andrewor14/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/andrewor14/subscriptions",
      "organizations_url": "https://api.github.com/users/andrewor14/orgs",
      "repos_url": "https://api.github.com/users/andrewor14/repos",
      "events_url": "https://api.github.com/users/andrewor14/events{/privacy}",
      "received_events_url": "https://api.github.com/users/andrewor14/received_events",
      "type": "User",
      "site_admin": false
    },
    "repo": {
      "id": 17231517,
      "node_id": "MDEwOlJlcG9zaXRvcnkxNzIzMTUxNw==",
      "name": "spark",
      "full_name": "andrewor14/spark",
      "private": false,
      "owner": {
        "login": "andrewor14",
        "id": 2133137,
        "node_id": "MDQ6VXNlcjIxMzMxMzc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2133137?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewor14",
        "html_url": "https://github.com/andrewor14",
        "followers_url": "https://api.github.com/users/andrewor14/followers",
        "following_url": "https://api.github.com/users/andrewor14/following{/other_user}",
        "gists_url": "https://api.github.com/users/andrewor14/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/andrewor14/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/andrewor14/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewor14/orgs",
        "repos_url": "https://api.github.com/users/andrewor14/repos",
        "events_url": "https://api.github.com/users/andrewor14/events{/privacy}",
        "received_events_url": "https://api.github.com/users/andrewor14/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/andrewor14/spark",
      "description": "Mirror of Apache Spark",
      "fork": true,
      "url": "https://api.github.com/repos/andrewor14/spark",
      "forks_url": "https://api.github.com/repos/andrewor14/spark/forks",
      "keys_url": "https://api.github.com/repos/andrewor14/spark/keys{/key_id}",
      "collaborators_url": "https://api.github.com/repos/andrewor14/spark/collaborators{/collaborator}",
      "teams_url": "https://api.github.com/repos/andrewor14/spark/teams",
      "hooks_url": "https://api.github.com/repos/andrewor14/spark/hooks",
      "issue_events_url": "https://api.github.com/repos/andrewor14/spark/issues/events{/number}",
      "events_url": "https://api.github.com/repos/andrewor14/spark/events",
      "assignees_url": "https://api.github.com/repos/andrewor14/spark/assignees{/user}",
      "branches_url": "https://api.github.com/repos/andrewor14/spark/branches{/branch}",
      "tags_url": "https://api.github.com/repos/andrewor14/spark/tags",
      "blobs_url": "https://api.github.com/repos/andrewor14/spark/git/blobs{/sha}",
      "git_tags_url": "https://api.github.com/repos/andrewor14/spark/git/tags{/sha}",
      "git_refs_url": "https://api.github.com/repos/andrewor14/spark/git/refs{/sha}",
      "trees_url": "https://api.github.com/repos/andrewor14/spark/git/trees{/sha}",
      "statuses_url": "https://api.github.com/repos/andrewor14/spark/statuses/{sha}",
      "languages_url": "https://api.github.com/repos/andrewor14/spark/languages",
      "stargazers_url": "https://api.github.com/repos/andrewor14/spark/stargazers",
      "contributors_url": "https://api.github.com/repos/andrewor14/spark/contributors",
      "subscribers_url": "https://api.github.com/repos/andrewor14/spark/subscribers",
      "subscription_url": "https://api.github.com/repos/andrewor14/spark/subscription",
      "commits_url": "https://api.github.com/repos/andrewor14/spark/commits{/sha}",
      "git_commits_url": "https://api.github.com/repos/andrewor14/spark/git/commits{/sha}",
      "comments_url": "https://api.github.com/repos/andrewor14/spark/comments{/number}",
      "issue_comment_url": "https://api.github.com/repos/andrewor14/spark/issues/comments{/number}",
      "contents_url": "https://api.github.com/repos/andrewor14/spark/contents/{+path}",
      "compare_url": "https://api.github.com/repos/andrewor14/spark/compare/{base}...{head}",
      "merges_url": "https://api.github.com/repos/andrewor14/spark/merges",
      "archive_url": "https://api.github.com/repos/andrewor14/spark/{archive_format}{/ref}",
      "downloads_url": "https://api.github.com/repos/andrewor14/spark/downloads",
      "issues_url": "https://api.github.com/repos/andrewor14/spark/issues{/number}",
      "pulls_url": "https://api.github.com/repos/andrewor14/spark/pulls{/number}",
      "milestones_url": "https://api.github.com/repos/andrewor14/spark/milestones{/number}",
      "notifications_url": "https://api.github.com/repos/andrewor14/spark/notifications{?since,all,participating}",
      "labels_url": "https://api.github.com/repos/andrewor14/spark/labels{/name}",
      "releases_url": "https://api.github.com/repos/andrewor14/spark/releases{/id}",
      "deployments_url": "https://api.github.com/repos/andrewor14/spark/deployments",
      "created_at": "2014-02-27T00:52:37Z",
      "updated_at": "2017-04-16T05:10:29Z",
      "pushed_at": "2017-05-22T18:27:33Z",
      "git_url": "git://github.com/andrewor14/spark.git",
      "ssh_url": "git@github.com:andrewor14/spark.git",
      "clone_url": "https://github.com/andrewor14/spark.git",
      "svn_url": "https://github.com/andrewor14/spark",
      "homepage": null,
      "size": 353607,
      "stargazers_count": 0,
      "watchers_count": 0,
      "language": "Scala",
      "has_issues": false,
      "has_projects": true,
      "has_downloads": true,
      "has_wiki": false,
      "has_pages": false,
      "has_discussions": false,
      "forks_count": 1,
      "mirror_url": null,
      "archived": false,
      "disabled": false,
      "open_issues_count": 0,
      "license": {
        "key": "apache-2.0",
        "name": "Apache License 2.0",
        "spdx_id": "Apache-2.0",
        "url": "https://api.github.com/licenses/apache-2.0",
        "node_id": "MDc6TGljZW5zZTI="
      },
      "allow_forking": true,
      "is_template": false,
      "web_commit_signoff_required": false,
      "topics": [],
      "visibility": "public",
      "forks": 1,
      "open_issues": 0,
      "watchers": 0,
      "default_branch": "master"
    }
  },
  "base": {
    "label": "apache:master",
    "ref": "master",
    "sha": "0adc932add413a1754107b21d5ecfb38c0c3a4eb",
    "user": {
      "login": "apache",
      "id": 47359,
      "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ3MzU5",
      "avatar_url": "https://avatars.githubusercontent.com/u/47359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apache",
      "html_url": "https://github.com/apache",
      "followers_url": "https://api.github.com/users/apache/followers",
      "following_url": "https://api.github.com/users/apache/following{/other_user}",
      "gists_url": "https://api.github.com/users/apache/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apache/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apache/subscriptions",
      "organizations_url": "https://api.github.com/users/apache/orgs",
      "repos_url": "https://api.github.com/users/apache/repos",
      "events_url": "https://api.github.com/users/apache/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apache/received_events",
      "type": "Organization",
      "site_admin": false
    },
    "repo": {
      "id": 17165658,
      "node_id": "MDEwOlJlcG9zaXRvcnkxNzE2NTY1OA==",
      "name": "spark",
      "full_name": "apache/spark",
      "private": false,
      "owner": {
        "login": "apache",
        "id": 47359,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ3MzU5",
        "avatar_url": "https://avatars.githubusercontent.com/u/47359?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apache",
        "html_url": "https://github.com/apache",
        "followers_url": "https://api.github.com/users/apache/followers",
        "following_url": "https://api.github.com/users/apache/following{/other_user}",
        "gists_url": "https://api.github.com/users/apache/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/apache/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/apache/subscriptions",
        "organizations_url": "https://api.github.com/users/apache/orgs",
        "repos_url": "https://api.github.com/users/apache/repos",
        "events_url": "https://api.github.com/users/apache/events{/privacy}",
        "received_events_url": "https://api.github.com/users/apache/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "html_url": "https://github.com/apache/spark",
      "description": "Apache Spark - A unified analytics engine for large-scale data processing",
      "fork": false,
      "url": "https://api.github.com/repos/apache/spark",
      "forks_url": "https://api.github.com/repos/apache/spark/forks",
      "keys_url": "https://api.github.com/repos/apache/spark/keys{/key_id}",
      "collaborators_url": "https://api.github.com/repos/apache/spark/collaborators{/collaborator}",
      "teams_url": "https://api.github.com/repos/apache/spark/teams",
      "hooks_url": "https://api.github.com/repos/apache/spark/hooks",
      "issue_events_url": "https://api.github.com/repos/apache/spark/issues/events{/number}",
      "events_url": "https://api.github.com/repos/apache/spark/events",
      "assignees_url": "https://api.github.com/repos/apache/spark/assignees{/user}",
      "branches_url": "https://api.github.com/repos/apache/spark/branches{/branch}",
      "tags_url": "https://api.github.com/repos/apache/spark/tags",
      "blobs_url": "https://api.github.com/repos/apache/spark/git/blobs{/sha}",
      "git_tags_url": "https://api.github.com/repos/apache/spark/git/tags{/sha}",
      "git_refs_url": "https://api.github.com/repos/apache/spark/git/refs{/sha}",
      "trees_url": "https://api.github.com/repos/apache/spark/git/trees{/sha}",
      "statuses_url": "https://api.github.com/repos/apache/spark/statuses/{sha}",
      "languages_url": "https://api.github.com/repos/apache/spark/languages",
      "stargazers_url": "https://api.github.com/repos/apache/spark/stargazers",
      "contributors_url": "https://api.github.com/repos/apache/spark/contributors",
      "subscribers_url": "https://api.github.com/repos/apache/spark/subscribers",
      "subscription_url": "https://api.github.com/repos/apache/spark/subscription",
      "commits_url": "https://api.github.com/repos/apache/spark/commits{/sha}",
      "git_commits_url": "https://api.github.com/repos/apache/spark/git/commits{/sha}",
      "comments_url": "https://api.github.com/repos/apache/spark/comments{/number}",
      "issue_comment_url": "https://api.github.com/repos/apache/spark/issues/comments{/number}",
      "contents_url": "https://api.github.com/repos/apache/spark/contents/{+path}",
      "compare_url": "https://api.github.com/repos/apache/spark/compare/{base}...{head}",
      "merges_url": "https://api.github.com/repos/apache/spark/merges",
      "archive_url": "https://api.github.com/repos/apache/spark/{archive_format}{/ref}",
      "downloads_url": "https://api.github.com/repos/apache/spark/downloads",
      "issues_url": "https://api.github.com/repos/apache/spark/issues{/number}",
      "pulls_url": "https://api.github.com/repos/apache/spark/pulls{/number}",
      "milestones_url": "https://api.github.com/repos/apache/spark/milestones{/number}",
      "notifications_url": "https://api.github.com/repos/apache/spark/notifications{?since,all,participating}",
      "labels_url": "https://api.github.com/repos/apache/spark/labels{/name}",
      "releases_url": "https://api.github.com/repos/apache/spark/releases{/id}",
      "deployments_url": "https://api.github.com/repos/apache/spark/deployments",
      "created_at": "2014-02-25T08:00:08Z",
      "updated_at": "2022-12-26T21:18:49Z",
      "pushed_at": "2022-12-26T23:10:31Z",
      "git_url": "git://github.com/apache/spark.git",
      "ssh_url": "git@github.com:apache/spark.git",
      "clone_url": "https://github.com/apache/spark.git",
      "svn_url": "https://github.com/apache/spark",
      "homepage": "https://spark.apache.org/",
      "size": 451536,
      "stargazers_count": 34617,
      "watchers_count": 34617,
      "language": "Scala",
      "has_issues": false,
      "has_projects": true,
      "has_downloads": true,
      "has_wiki": false,
      "has_pages": false,
      "has_discussions": false,
      "forks_count": 26430,
      "mirror_url": null,
      "archived": false,
      "disabled": false,
      "open_issues_count": 208,
      "license": {
        "key": "apache-2.0",
        "name": "Apache License 2.0",
        "spdx_id": "Apache-2.0",
        "url": "https://api.github.com/licenses/apache-2.0",
        "node_id": "MDc6TGljZW5zZTI="
      },
      "allow_forking": true,
      "is_template": false,
      "web_commit_signoff_required": false,
      "topics": [
        "big-data",
        "java",
        "jdbc",
        "python",
        "r",
        "scala",
        "spark",
        "sql"
      ],
      "visibility": "public",
      "forks": 26430,
      "open_issues": 208,
      "watchers": 34617,
      "default_branch": "master"
    }
  },
  "_links": {
    "self": {
      "href": "https://api.github.com/repos/apache/spark/pulls/204"
    },
    "html": {
      "href": "https://github.com/apache/spark/pull/204"
    },
    "issue": {
      "href": "https://api.github.com/repos/apache/spark/issues/204"
    },
    "comments": {
      "href": "https://api.github.com/repos/apache/spark/issues/204/comments"
    },
    "review_comments": {
      "href": "https://api.github.com/repos/apache/spark/pulls/204/comments"
    },
    "review_comment": {
      "href": "https://api.github.com/repos/apache/spark/pulls/comments{/number}"
    },
    "commits": {
      "href": "https://api.github.com/repos/apache/spark/pulls/204/commits"
    },
    "statuses": {
      "href": "https://api.github.com/repos/apache/spark/statuses/7b7234cd275628a4fa1ce8e2b06392f546964339"
    }
  },
  "author_association": "CONTRIBUTOR",
  "auto_merge": null,
  "active_lock_reason": null,
  "merged": false,
  "mergeable": false,
  "rebaseable": false,
  "mergeable_state": "dirty",
  "merged_by": null,
  "comments": 108,
  "review_comments": 63,
  "maintainer_can_modify": false,
  "commits": 26,
  "additions": 1075,
  "deletions": 201,
  "changed_files": 38
}